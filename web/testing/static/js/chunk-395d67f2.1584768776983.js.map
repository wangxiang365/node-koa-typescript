{"version":3,"sources":["webpack:///./src/views/my/setting/bankCard/cardList.vue?401a","webpack:///./src/views/my/setting/bankCard/cardList.vue?3c6b","webpack:///src/views/my/setting/bankCard/cardList.vue","webpack:///./src/views/my/setting/bankCard/cardList.vue?5e3b","webpack:///./src/views/my/setting/bankCard/cardList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_l","item","index","key","style","background","backgrundGradient","after","front","on","$event","showDeleteButton","_v","_s","bankName","_f","cardType","cardNo","cardList","length","_e","attrs","addCard","showPasswordPop","finish","staticRenderFns","components","noData","numberKeyboard","data","userInfo","curId","visible","Loop","clearFlag","showToast","confirmVisible","passwordVal","isPayPasswordSte","mounted","JSON","parse","localStorage","getItem","isSetPaymentPassword","getCardList","computed","methods","$http","post","res","status","clearInterval","setTimeout","title","message","params","id","parseInt","resData","clearLoop","get","api","isSetPayPassword","then","personalData","cardStatus","setItem","$router","push","checkPassword","Promise","paymentPassword","val","resolve","component"],"mappings":"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","file":"static/js/chunk-395d67f2.1584768776983.js","sourcesContent":["import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cardList.vue?vue&type=style&index=0&id=f08a7c34&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cardList.vue?vue&type=style&index=0&id=f08a7c34&scoped=true&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"manger-card-wrap\"},[_c('div',_vm._l((_vm.cardList),function(item,index){return _c('div',{key:index,staticClass:\"item-box\",style:({ background: 'linear-gradient(-45deg,' + _vm.backgrundGradient[index = index <= 3 ? index : index % 4].after + ',' + _vm.backgrundGradient[index = index <= 3 ? index : index % 4].front + ')'}),on:{\"touchstart\":function($event){return _vm.showDeleteButton(index)}}},[_c('p',[_vm._v(\" \"+_vm._s(item.bankName)+\" \")]),_c('p',{staticClass:\"card-type\"},[_vm._v(_vm._s(_vm._f(\"cardTypeFilter\")(item.cardType)))]),_c('p',[_vm._v(_vm._s(_vm._f(\"cardNoFilter\")(item.cardNo)))])])}),0),(_vm.cardList.length <= 0)?_c('no-data'):_vm._e(),_c('div',{staticClass:\"add-card\"},[_c('van-button',{staticClass:\"add-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addCard}},[_vm._v(\"添加银行卡\")])],1),_c('numberKeyboard',{attrs:{\"show\":_vm.showPasswordPop},on:{\"finish\":_vm.finish,\"close\":function($event){_vm.showPasswordPop = false}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div class=\"manger-card-wrap\">\r\n      <div>\r\n        <div v-for=\"(item, index) in cardList\" class=\"item-box\"\r\n        @touchstart=\"showDeleteButton(index)\"\r\n        :style=\"{ background: 'linear-gradient(-45deg,' + backgrundGradient[index = index <= 3 ? index : index % 4].after + ',' + backgrundGradient[index = index <= 3 ? index : index % 4].front + ')'}\" :key=\"index\">\r\n          <p>\r\n            {{item.bankName}}\r\n          </p>\r\n          <p class=\"card-type\">{{item.cardType | cardTypeFilter}}</p>\r\n          <p>{{item.cardNo | cardNoFilter}}</p>\r\n        </div>\r\n      </div>\r\n      <!-- 无数据 -->\r\n      <no-data v-if=\"cardList.length <= 0\"></no-data>\r\n      <div class=\"add-card\">\r\n        <van-button type=\"primary\"  @click=\"addCard\" class=\"add-btn\">添加银行卡</van-button>\r\n      </div>\r\n      <!-- 密码、键盘框弹窗 -->\r\n      <numberKeyboard :show=\"showPasswordPop\" @finish=\"finish\" @close=\"showPasswordPop = false\"></numberKeyboard>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport noData from '../../../../components/noData'\r\nimport numberKeyboard from '../../../../components/numberKeyboard'\r\nimport { Checkbox, Button, Toast, Dialog, PasswordInput, NumberKeyboard, Popup } from 'vant'\r\nexport default {\r\n  components: {\r\n    noData,\r\n    numberKeyboard,\r\n    [Checkbox.name]: Checkbox,\r\n    [Button.name]: Button,\r\n    [Toast.name]: Toast,\r\n    [Dialog.Component.name]: Dialog.Component,\r\n    [PasswordInput.name]: PasswordInput,\r\n    [NumberKeyboard.name]: NumberKeyboard,\r\n    [Popup.name]: Popup\r\n  },\r\n  data () {\r\n    return {\r\n      userInfo: {},                         // 用户信息\r\n      cardList: [],                         // 银行卡列表\r\n      curId: '',                            // 删除当前银行卡id\r\n      backgrundGradient: [{\r\n        front: '#A61F23',\r\n        after: '#A61F23',\r\n        visible: false\r\n      }, {\r\n        front: '#0061A5',\r\n        after: '#0061A5',\r\n        visible: false\r\n      }, {\r\n        front: '#414150',\r\n        after: '#5e5e76',\r\n        visible: false\r\n      }, {\r\n        front: '#53507a',\r\n        after: '#ac85e7',\r\n        visible: false\r\n      }],                                  // 渐变背景色\r\n      Loop: null,\r\n      clearFlag: true,\r\n      showToast: false,\r\n      confirmVisible: false,\r\n      showPasswordPop: false,             // 密码框弹框\r\n      passwordVal: '',                    // 输入的密码\r\n      isPayPasswordSte: null              // 是否设置交易密码 0：未设置， 1：已设置\r\n    }\r\n  },\r\n  mounted () {\r\n    this.userInfo = JSON.parse(localStorage.getItem('LZWLUSERINFO'))\r\n    this.isSetPaymentPassword()            // 是否设置了支付密码\r\n    this.getCardList()\r\n  },\r\n  computed: {\r\n    ...mapState(['personalData'])\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取银行卡列表\r\n     */\r\n    getCardList () {\r\n      this.$http.post(`${this.api.getCardList}`, {}).then((res) => {\r\n        if (res.data.status !== this.api.ERR_OK || !res) return false\r\n        this.cardList = res.data.data\r\n        this.cardList = this.cardList.filter(row => row.accountType === 1)\r\n      })\r\n    },\r\n    /**\r\n     * 长按事件\r\n     */\r\n    showDeleteButton (index) {\r\n      this.curId = index\r\n      clearInterval(this.Loop)\r\n      this.Loop = setTimeout(() => {\r\n        Dialog.confirm({\r\n          title: '解绑银行卡',\r\n          message: '确认将该银行卡解除绑定吗？'\r\n        }).then(() => {\r\n          this.$http.get(this.api.delCard, {\r\n            params: {\r\n              id: this.cardList[this.curId].id\r\n            }\r\n          }).then((res) => {\r\n            let resData = res.data\r\n            if (parseInt(resData.status) === parseInt(this.api.ERR_OK)) {\r\n              this.getCardList()\r\n            }\r\n          })\r\n        })\r\n      }, 1000)\r\n    },\r\n    clearLoop () {\r\n      clearInterval(this.Loop)\r\n    },\r\n    /**\r\n     * 获取是否设置支付密码\r\n    */\r\n    isSetPaymentPassword () {\r\n      this.$http.get(this.api.isSetPayPassword).then((res) => {\r\n        let resData = res.data\r\n        if (parseInt(res.data.status) === parseInt(this.api.ERR_OK)) {\r\n          this.isPayPasswordSte = resData.data\r\n        }\r\n      })\r\n    },\r\n    /**\r\n     * 添加银行卡\r\n    */\r\n    addCard () {\r\n      if (this.personalData.cardStatus) {                                                                 // 未实名认证(实名+设置支付密码)\r\n        localStorage.setItem('redirectUrl', '/my/setting/addBankCard')                // 重定向url\r\n        this.$router.push('/my/setting/realNameAuth')\r\n      } if (!this.personalData.cardStatus && this.isPayPasswordSte === 0) {                               // 已实名认证未设置密码\r\n        localStorage.setItem('redirectUrl', '/my/setting/bankCard')                   // 重定向url\r\n        this.$router.push('/my/setting/resetPayPwd')\r\n      } if (!this.personalData.cardStatus && this.isPayPasswordSte === 1) {                               // 已实名认证已设置密码\r\n        this.showPasswordPop = true\r\n      }\r\n    },\r\n    /**\r\n     * 校验支付密码是否正确\r\n    */\r\n    checkPassword (val) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$http.post(this.api.checkPassword, {\r\n          id: this.userInfo.userId,\r\n          paymentPassword: val\r\n        }).then((res) => {\r\n          let resData = res.data\r\n          if (parseInt(res.data.status) === parseInt(this.api.ERR_OK)) {\r\n            resolve(resData)\r\n          } else {\r\n            this.$toast(resData.msg)\r\n          }\r\n        })\r\n      })\r\n    },\r\n    /**\r\n     * 输入完成\r\n    */\r\n    async finish (val) {\r\n      let result = await this.checkPassword(val)\r\n      if (parseInt(result.status) === 1) {\r\n        this.showPasswordPop = false\r\n        this.$router.push('/my/setting/addBankCard')\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n.manger-card-wrap{\r\n  height: 100vh;\r\n  background: #eee;\r\n  padding: .2rem;\r\n  height: calc(100vh);\r\n  box-sizing: border-box;\r\n  overflow: auto;\r\n  background: #1c1e3a;\r\n  .item-box{\r\n    width: 6.4rem;\r\n    height: 142px;\r\n    margin: 0 auto .3rem;\r\n    padding: .3rem .2rem .3rem .36rem;\r\n    border-radius: 20px;\r\n    text-align: left;\r\n    p{\r\n      color: #fff;\r\n      font-weight: 600;\r\n      letter-spacing: 5px;\r\n      margin-bottom: .1rem;\r\n\r\n      .fast-pay{\r\n        font-size: .22rem;\r\n        font-style: italic;\r\n        letter-spacing: 1px;\r\n\r\n        .pay{\r\n          // color: transparent;\r\n          transform: skewX(-45deg);\r\n          // background: #fff;\r\n          position: relative;\r\n        }\r\n        .pay:before{\r\n            content: '';\r\n            position: absolute;\r\n            top: 0;\r\n            right: -2px;\r\n            bottom: 0;\r\n            left: 2px;\r\n            background-color: #fff;\r\n            transform: skewX(-15deg);\r\n            z-index: -1;\r\n        }\r\n      }\r\n    }\r\n\r\n    .card-type{\r\n      display: inline-block;\r\n      width: 1.5rem;\r\n      font-size: .26rem;\r\n      font-weight: normal;\r\n      margin-bottom: .16rem;\r\n      opacity: .5;\r\n    }\r\n  }\r\n  .add-card{\r\n    padding: .4rem .2rem;\r\n    .add-btn{\r\n      width:622px;\r\n      height:81px;\r\n      line-height: 81px;\r\n      background:rgba(105,129,251,1);\r\n      border-radius:10px;\r\n      font-size: 0.28rem;\r\n      cursor: pointer;\r\n      border: none;\r\n      margin: 0 auto;\r\n      cursor: pointer;\r\n      margin-top: 59px;\r\n    }\r\n  }\r\n  // 支付密码弹窗\r\n  .password-keyboard{\r\n    left: 0;\r\n    right: 0;\r\n    max-width: 750px;\r\n    margin: 0 auto;\r\n    // tip\r\n    .tip{\r\n      margin-top: 35px;\r\n      font-size: 28px;\r\n    }\r\n    // 密码框\r\n    .van-password-input{\r\n      margin-top: 50px;\r\n      padding: 0 3%;\r\n      li{\r\n        border: 1px solid #ccc;\r\n      }\r\n    }\r\n    // 忘记密码\r\n    .forgetPwd{\r\n      font-size: 28px;\r\n      margin: 35px 0;\r\n      color: #0099CC;\r\n      cursor: pointer;\r\n    }\r\n    // 键盘\r\n    .van-number-keyboard{\r\n      max-width: 750px;\r\n      left: 0;\r\n      right: 0;\r\n      margin: auto;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cardList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./cardList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./cardList.vue?vue&type=template&id=f08a7c34&scoped=true&\"\nimport script from \"./cardList.vue?vue&type=script&lang=js&\"\nexport * from \"./cardList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./cardList.vue?vue&type=style&index=0&id=f08a7c34&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f08a7c34\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}