(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8e59b42"],{"50f8":function(e,t,o){e.exports=o.p+"static/img/login-title.c2405c8c.png"},"52ab":function(e,t,o){"use strict";var i=o("cad7"),n=o.n(i);n.a},cad7:function(e,t,o){},dd7b:function(e,t,o){"use strict";o.r(t);var i,n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"login-wrap"},[o("div",{staticClass:"content"},[e._m(0),o("div",{staticClass:"name"},[e._v("推广大使系统")]),o("div",{staticClass:"box"},[o("ul",[o("li",[o("div",{staticClass:"ico"},[o("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#iconwodedangxuan"}})])]),o("div",{staticClass:"inp"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.phone,expression:"loginForm.phone"}],attrs:{type:"tel",placeholder:"请输入手机号",maxlength:"11",autocomplete:"off"},domProps:{value:e.loginForm.phone},on:{blur:e.inputBlur,focusout:e.inputBlur,input:function(t){t.target.composing||e.$set(e.loginForm,"phone",t.target.value)}}})])]),1===e.loginForm.loginType?o("li",[o("div",{staticClass:"ico"},[o("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#iconmima"}})])]),o("div",{staticClass:"inp"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],attrs:{type:"password",placeholder:"请输入登录密码"},domProps:{value:e.loginForm.password},on:{blur:e.inputBlur,focusout:e.inputBlur,input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value)}}})])]):e._e(),2===e.loginForm.loginType?o("li",[o("div",{staticClass:"ico"},[o("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[o("use",{attrs:{"xlink:href":"#iconyanzhengma"}})])]),o("div",{staticClass:"inp"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.code,expression:"loginForm.code"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:e.loginForm.code},on:{blur:e.inputBlur,focusout:e.inputBlur,input:function(t){t.target.composing||e.$set(e.loginForm,"code",t.target.value)}}})]),o("van-button",{staticClass:"getCode",class:{disabled:e.getCodeNoTap},attrs:{type:"primary",disabled:e.getCodeNoTap},on:{click:function(t){!e.getCodeNoTap&&e.getCode()}}},[e._v(e._s(e.CodeText))])],1):e._e()]),o("div",{staticClass:"change-mode"},[o("div",{staticClass:"short-letter",on:{click:e.changeLoginType}},[e._v(e._s(e.loginForm.loginTypeTxt))]),1===e.loginForm.loginType?o("div",{staticClass:"remember-pwd"},[o("van-checkbox",{attrs:{shape:"square","checked-color":"rgba(105, 129, 251, 1)"},model:{value:e.loginForm.rememberPwd,callback:function(t){e.$set(e.loginForm,"rememberPwd",t)},expression:"loginForm.rememberPwd"}},[e._v("记住密码")])],1):e._e()]),o("div",{staticClass:"submit"},[o("van-button",{attrs:{type:"primary",disabled:!e.subActive},on:{click:function(t){e.subActive&&e.login()}}},[e._v("登录")])],1),o("div",{staticClass:"forget"},[o("span",{on:{click:function(t){return e.$router.push("/forgotPassword")}}},[e._v("忘记密码？")]),o("span",{on:{click:function(t){return e.$router.push({path:"/register",query:{invitationCode:e.$route.query.invitationCode}})}}},[e._v("没有账号，去注册")])])])])])},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bg"},[i("img",{attrs:{src:o("50f8")}})])}],a=(o("b0c0"),o("d3b7"),o("e25e"),o("ac1f"),o("466d"),o("5319"),o("96cf"),o("2fa7")),s=(o("e7e5"),o("d399")),l=(o("66b9"),o("b650")),c=(o("3c32"),o("417e")),m={components:(i={},Object(a["a"])(i,c["a"].name,c["a"]),Object(a["a"])(i,l["a"].name,l["a"]),Object(a["a"])(i,s["a"].name,s["a"]),i),data:function(){return{loginForm:{loginType:1,loginTypeTxt:"用短信验证码登录",rememberPwd:!1,phoe:"",password:"",code:"",codeVal:""},Time:60,getCodeNoTap:!1,CodeText:"发送验证码",timer:null,subActive:!1}},watch:{loginForm:{handler:function(){this.subActive=!!(1===this.loginForm.loginType&&this.loginForm.phone&&this.loginForm.password||2===this.loginForm.loginType&&this.loginForm.phone&&this.loginForm.code)},deep:!0}},mounted:function(){var e=JSON.parse(localStorage.getItem("ACCOUNTMES"));e&&"{}"!==JSON.stringify(e)&&(this.loginForm.phone=e.userName,this.loginForm.password=e.password,this.loginForm.rememberPwd=e.rememberPwd)},beforeDestroy:function(){},beforeRouteEnter:function(e,t,o){o()},methods:{inputBlur:function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);t&&(document.body.scrollTop=document.documentElement.scrollTop=0)},changeLoginType:function(){this.loginForm.loginType=1===this.loginForm.loginType?2:1,this.loginForm.loginTypeTxt=1===this.loginForm.loginType?"用短信验证码登录":"用密码登录"},countDown:function(){this.Time>0?(this.getCodeNoTap=!0,this.CodeText=this.Time+"s",--this.Time):(clearInterval(this.timer),this.Time=60,this.getCodeNoTap=!1,this.CodeText="重新获取")},getCode:function(){var e=this;return this.loginForm.phone?this.loginForm.phone.match(/^1\d{10}$/g)?(this.sendCode(),this.countDown(),void(this.timer=setInterval((function(){e.countDown()}),1e3))):(Object(s["a"])("请输入正确的手机号"),!1):(Object(s["a"])("请输入手机号"),!1)},checkCode:function(e){var t=this;return new Promise((function(e,o){t.$http.post("".concat(t.api.checkVerifyCode),{phone:t.loginForm.phone,verifyCode:t.loginForm.code}).then((function(o){if(parseInt(o.data.status)!==parseInt(t.api.ERR_OK))return Object(s["a"])(o.data.msg),!1;e()}))}))},sendCode:function(){var e=this;this.$http.post("".concat(this.api.getValidWord),{phone:this.loginForm.phone}).then((function(t){Object(s["a"])(t.data.msg),t.data.data&&(e.loginForm.codeVal=t.data.data)}))},loginCheck:function(){var e=this;return new Promise((function(t,o){if(!e.loginForm.phone)return Object(s["a"])("请输入手机号"),!1;if(!e.loginForm.phone.match(/^1\d{10}$/g))return Object(s["a"])("请输入正确的手机号"),!1;if(1===e.loginForm.loginType){if(!e.loginForm.password)return Object(s["a"])("请输入密码"),!1;if(e.loginForm.password.length<6||e.loginForm.password.length>20)return Object(s["a"])("密码限6-20个字符"),!1}else if(2===e.loginForm.loginType){if(!e.loginForm.code)return Object(s["a"])("请输入验证码"),!1;if(4!==e.loginForm.code.length)return Object(s["a"])("验证码限4个字符"),!1}t()}))},login:function(){var e,t=this;return regeneratorRuntime.async((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.loginCheck());case 2:if(e={},2!==this.loginForm.loginType){o.next=6;break}return o.next=6,regeneratorRuntime.awrap(this.checkCode());case 6:s["a"].loading({message:"登录中...",forbidClick:!0,duration:0}),this.$http.post("".concat(this.api.login),{phone:this.loginForm.phone,password:1===this.loginForm.loginType?this.loginForm.password:this.loginForm.code}).then((function(o){if(localStorage.setItem("accountMes",JSON.stringify(e)),o.data.status!==t.api.ERR_OK||!o)return Object(s["a"])(o.data.msg),!1;s["a"].clear(),Object(s["a"])("登录成功"),e.userName=t.loginForm.rememberPwd?t.loginForm.phone:"",e.password=t.loginForm.rememberPwd?t.loginForm.password:"",e.rememberPwd=t.loginForm.rememberPwd,localStorage.setItem("ACCOUNTMES",JSON.stringify(e)),localStorage.setItem("LZWLUSERINFO",JSON.stringify(o.data.data)),localStorage.getItem("REDIRECT_URL")&&"/bootPage"!==localStorage.getItem("REDIRECT_URL")&&(t.$router.replace({path:localStorage.getItem("REDIRECT_URL")}),localStorage.removeItem("REDIRECT_URL")),localStorage.getItem("REDIRECT_URL"),t.$router.replace("/index")}));case 8:case"end":return o.stop()}}),null,this)}}},g=m,d=(o("52ab"),o("2877")),u=Object(d["a"])(g,n,r,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-c8e59b42.1584768776983.js.map